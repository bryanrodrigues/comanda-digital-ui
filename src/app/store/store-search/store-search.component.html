<div class="container-adm">

  <div class="ui-g">
    <form autocomplete="off" (ngSubmit)="find()">
      <div class="ui-g-12">
          <h1>Pesquisar Estabelecimentos</h1>
      </div>


      <div class="ui-g-12 ui-fluid">
        <label>Nome</label>
        <input pInputText type="text" maxlength="100" name="nome" [(ngModel)]="nome">
      </div>

      <div class="ui-g-12">
        <button pButton type="submit" label="Pesquisar"></button>
      </div>
    </form>


<p-table #dt [value]="stores" dataKey="idStore"
        [paginator]="true" [rows]="15" [autoLayout]="true"
        editMode="row" responsive="true">
    <ng-template pTemplate="header">
        <tr>
          <th>CNPJ</th>
          <th>Status</th>
          <th>Nome</th>
          <th>Tel.</th>
          <th>Dt. Cad.</th>
          <th>CEP</th>
          <th>Logr.</th>
          <th>Comp.</th>
          <th>Cidade</th>
          <th>Bairro</th>
          <th>UF</th>
          <th>Ação</th>
        </tr>
    </ng-template>
    <ng-template pTemplate="body" let-store let-editing="editing" let-ri="rowIndex">
        <tr [pEditableRow]="store">
            <td>
                <p-cellEditor>
                    <ng-template pTemplate="input">
                      <span class="ui-column-title">CNPJ</span>
                      <input pInputText type="text" minlength="5" name="cnpj" style="width: 150px;" [(ngModel)]="store.cnpj" readonly>
                    </ng-template>
                    <ng-template pTemplate="output">
                        <span class="ui-column-title">CNPJ</span>
                        {{store.cnpj}}
                    </ng-template>
                </p-cellEditor>
            </td>


            <td>
              <p-cellEditor>
                  <ng-template pTemplate="input">
                      <span class="ui-column-title">Status</span>
                      <input pInputText type="text" minlength="5" name="status" style="width: 60px;" [(ngModel)]="store.status" readonly>
                  </ng-template>
                  <ng-template pTemplate="output">
                      <span class="ui-column-title">Status</span>
                      {{store.status ==1 ? 'Ativo' : 'Inativo'}}
                  </ng-template>
              </p-cellEditor>
          </td>


            <td>
                <p-cellEditor>
                    <ng-template pTemplate="input">
                        <span class="ui-column-title">Nome</span>
                        <input pInputText type="text" minlength="5" name="name" style="width: 130px;" [(ngModel)]="store.name" required>
                    </ng-template>
                    <ng-template pTemplate="output">
                        <span class="ui-column-title">Nome</span>
                        {{store.name}}
                    </ng-template>
                </p-cellEditor>
            </td>

            <td>
              <p-cellEditor>
                  <ng-template pTemplate="input">
                      <span class="ui-column-title">Telefone</span>
                      <input pInputText type="text" minlength="5" name="phone"style="width: 110px;" [(ngModel)]="store.phone" required>
                  </ng-template>
                  <ng-template pTemplate="output">
                      <span class="ui-column-title">Telefone</span>
                      {{store.phone}}
                  </ng-template>
              </p-cellEditor>
          </td>

          <td>
            <p-cellEditor>
                  <ng-template pTemplate="input">
                      <span class="ui-column-title">Data Cadastro</span>
                      <span class="ui-column-title">Data Cadastro</span>
                      {{store.registrationDate  | date:'dd/MM/y HH:mm '}}
                  </ng-template>
                  <ng-template pTemplate="output">
                      <span class="ui-column-title">Data Cadastro</span>
                      {{store.registrationDate  | date:'dd/MM/y HH:mm '}}
                  </ng-template>
            </p-cellEditor>
          </td>

          <td>
           <p-cellEditor>
                <ng-template pTemplate="input">
                    <span class="ui-column-title">CEP</span>
                    <input pInputText type="text" minlength="1" name="cep" style="width: 85px;" [(ngModel)]="store.address.cep"  >
                </ng-template>
                <ng-template pTemplate="output">
                    <span class="ui-column-title">CEP</span>
                    {{store.address.cep}}
                </ng-template>
            </p-cellEditor>
          </td>


          <td>
            <p-cellEditor>
              <ng-template pTemplate="input">
                <span class="ui-column-title">Logradouro</span>
                <textarea pInputTextarea rows="3" minlength="1"  name="logradouro" style="width: 80px;"  [(ngModel)]="store.address.logradouro"></textarea>
              </ng-template>
              <ng-template pTemplate="output">
                <span class="ui-column-title">Logradouro</span>
                {{store.address.logradouro}}
              </ng-template>
            </p-cellEditor>
          </td>



          <td>
            <p-cellEditor>
              <ng-template pTemplate="input">
                <span class="ui-column-title">Complemento</span>
                <input pInputText type="text" name="complemento" style="width: 40px;" [(ngModel)]="store.address.complemento"  >
              </ng-template>
              <ng-template pTemplate="output">
                <span class="ui-column-title">Complemento</span>
                {{store.address.complemento}}
              </ng-template>
            </p-cellEditor>
          </td>

          <td>
            <p-cellEditor>
              <ng-template pTemplate="input">
                <span class="ui-column-title">Cidade</span>
                <input pInputText type="text" minlength="1" name="localidade" style="width: 80px;"  [(ngModel)]="store.address.localidade"  >
              </ng-template>
              <ng-template pTemplate="output">
                  <span class="ui-column-title">Cidade</span>
                  {{store.address.localidade}}
              </ng-template>
            </p-cellEditor>
          </td>

          <td>
            <p-cellEditor>
              <ng-template pTemplate="input">
                <span class="ui-column-title">Bairro</span>
                <input pInputText type="text" minlength="1" name="bairro" style="width: 110px;"  [(ngModel)]="store.address.bairro"  >
              </ng-template>
              <ng-template pTemplate="output">
                <span class="ui-column-title">Bairro</span>
                {{store.address.bairro}}
              </ng-template>
            </p-cellEditor>
          </td>


          <td>
            <p-cellEditor>
            <ng-template pTemplate="input">
              <span class="ui-column-title">UF</span>
              <input pInputText type="text" minlength="1" name="uf"  style="width: 30px;"   [(ngModel)]="store.address.uf"  >
            </ng-template>
            <ng-template pTemplate="output">
                <span class="ui-column-title">UF</span>
                {{store.address.uf}}
            </ng-template>
          </p-cellEditor>
        </td>





      <td style="text-align:center">

              <button *ngIf="!editing" pButton type="button" pInitEditableRow icon="pi pi-pencil" class="ui-button-info" (click)="onRowEditInit(store, store.address)" style="margin-right: 5px;"></button>
              <button *ngIf="editing" pButton type="button" pSaveEditableRow icon="pi pi-check" class="ui-button-success" style="margin-right: .5em" (click)="onRowEditSave(store, store.address)"></button>
              <button *ngIf="editing" pButton type="button" pCancelEditableRow icon="pi pi-times" class="ui-button-danger" (click)="onRowEditCancel(store, ri)"></button>
              <button *ngIf="!editing && store.status==1" pButton icon="pi pi-lock"pButton pTooltip="Apagar" tooltipPosition="top" (click)="disable(store)" ></button>
              <button *ngIf="!editing && store.status==2" pButton icon="pi pi-lock-open"pButton pTooltip="Apagar" tooltipPosition="top" (click)="disable(store)" ></button>
      </td>
        </tr>
    </ng-template>
</p-table>



</div>

</div>
